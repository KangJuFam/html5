<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í´ë¦­ ê²Œì„</title>
    <style>
        body {
			background: linear-gradient(to bottom, #87CEEB, #1E90FF);
			color: white;
			font-family: 'Arial', sans-serif;
			text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f4f4f4;
        }
        h1 {
            margin-bottom: 20px;
        }
        #score {
            font-size: 24px;
            margin-bottom: 20px;
        }
        #clickButton {
			font-size: 24px;
			padding: 15px 40px;
            border: none;
			background-color: #ffcc00;
			color: black;
            cursor: pointer;
			border-radius: 10px;
			box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
			transition: transform 0.1s, background-color 0.3s;
        }
		#clickButton:active {
			transform: scale(0.9);
			background-color: #ffaa00;
		}
        #clickButton:hover {
            background-color: #0056b3;
        }
		#score, #highScoreDisplay, #timer {
			font-size: 24px;
			margin: 10px;
		}
		@keyframes scorePop {
			0% {
				transform: scale(1);
			}
			50% {
				transform: scale(1.5);
			}
			100% {
				transform: scale(1);
			}
		}
		#timer {
			font-size: 20px;
			margin-bottom: 10px;
			color: red;
		}
		@media (max-width: 768px) {
			#clickButton {
				font-size: 20px;
				padding: 12px 30px;
			}
			#score, #timer, #highScoreDisplay {
				font-size: 20px;
			}
		}
		#clickButton:active {
			transform: scale(0.85);
			background-color: #ff8800;
			transition: transform 0.1s ease, background-color 0.2s ease;
		}
		#specialItem {
			font-size: 30px;
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			cursor: pointer;
			transition: transform 0.2s ease;
		}

		#specialItem:hover {
			transform: scale(1.2);
		}
    </style>
</head>
<body>
    <h1>í´ë¦­ ê²Œì„</h1>
	<div id="difficulty">
		ë‚œì´ë„ ì„ íƒ: 
		<button onclick="setDifficulty('easy')">ì‰¬ì›€</button>
		<button onclick="setDifficulty('normal')">ë³´í†µ</button>
		<button onclick="setDifficulty('hard')">ì–´ë ¤ì›€</button>
	</div><br>
	<div id="mode">
		ëª¨ë“œ ì„ íƒ:
		<button onclick="startGame(10)">10ì´ˆ ëª¨ë“œ</button>
		<button onclick="startGame(30)">30ì´ˆ ëª¨ë“œ</button>
		<button onclick="startGame(-1)">ë¬´ì œí•œ ëª¨ë“œ</button>
	</div>
	<div id="timer">ë‚¨ì€ ì‹œê°„: -</div>
    <div id="score">ì ìˆ˜: 0</div>
    <button id="clickButton">ëª¨ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”.</button>
	<div id="specialItem" onclick="collectItem()" style="display: none;">ğŸ</div>
	<div id="scoreList"></div>
	<button onclick="shareScore()">ğŸ“¢ ì ìˆ˜ ê³µìœ í•˜ê¸°</button>
	<audio id="clickSound" src="click-sound.wav"></audio>
	<audio id="bgMusic" src="background-music.wav" loop></audio>
	<audio id="itemSound" src="item-sound.wav"></audio>
	<audio id="gameOverSound" src="game-over.wav"></audio>
	
	<script>
	let score = 0;
    let timeLeft = 0; // ê²Œì„ ì‹œê°„ ì„¤ì • (10ì´ˆ)
    let highScore = localStorage.getItem("highScore") || 0;
    let timerInterval;
	let gameRunning = false;
	let difficulty = 'easy'; // ê¸°ë³¸ ë‚œì´ë„ ì„¤ì •
	let scoreIncrement = 1;
	let timerDecrement = 1;
	
    const scoreDisplay = document.getElementById("score");
    const clickButton = document.getElementById("clickButton");
    const timerDisplay = document.getElementById("timer");
    const highScoreDisplay = document.createElement("div");
    const clickSound = document.getElementById("clickSound");
	const bgMusic = document.getElementById("bgMusic");
	const itemSound = document.getElementById("itemSound");
	const gameOverSound = document.getElementById("gameOverSound");

	highScoreDisplay.textContent = `ìµœê³  ì ìˆ˜: ${highScore}`;
    highScoreDisplay.style.fontSize = "20px";
    highScoreDisplay.style.marginBottom = "10px";
    document.body.insertBefore(highScoreDisplay, clickButton);
	
	function startGame(duration) {
		score = 0;
		scoreDisplay.textContent = `ì ìˆ˜: ${score}`;
		timeLeft = duration;
		gameRunning = true;
		clickButton.disabled = false;
		timerDisplay.textContent = timeLeft > 0 ? `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ` : "ë¬´ì œí•œ ëª¨ë“œ";
		clickButton.textContent = "í´ë¦­í•˜ì„¸ìš”!";
			
		// ë°°ê²½ ìŒì•… ì¬ìƒ
		bgMusic.volume = 0.5;
		bgMusic.play();
		
		if (timerInterval) clearInterval(timerInterval);
		if (timeLeft > 0) {
			timerInterval = setInterval(() => {
				timeLeft -= timerDecrement; // ë‚œì´ë„ì— ë”°ë¼ íƒ€ì´ë¨¸ ê°ì†ŒëŸ‰ ì¡°ì •
				timerDisplay.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
				
				if (timeLeft <= 0) {
					clearInterval(timerInterval);
					endGame();
				}
			}, 1000);
		}
	}

	function endGame() {
		clickButton.disabled = true;
		gameRunning = false;
		clickButton.textContent = "ê²Œì„ ì¢…ë£Œ";
		
		// ê²Œì„ ì˜¤ë²„ íš¨ê³¼ìŒ ì¬ìƒ
		gameOverSound.currentTime = 0;
		gameOverSound.play();

		// ë°°ê²½ ìŒì•… ì •ì§€
		bgMusic.pause();
		bgMusic.currentTime = 0;
		
		if (score > highScore) {
			highScore = score;
			localStorage.setItem("highScore", highScore);
			highScoreDisplay.textContent = `ìµœê³  ì ìˆ˜: ${highScore}`;
		}
		
		saveScore(score);
		
		alert(`ê²Œì„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜: ${score}`);
	}
	
	clickButton.addEventListener("click", handleClick);
	clickButton.addEventListener("touchstart", handleClick);
	
	function handleClick(event) {
		event.preventDefault(); // ëª¨ë°”ì¼ì—ì„œ í„°ì¹˜ ì§€ì—° ë°©ì§€
		if (!gameRunning) return;
	
		score += scoreIncrement; // ë‚œì´ë„ì— ë”°ë¥¸ ì ìˆ˜ ì¦ê°€ëŸ‰ ì ìš©
		scoreDisplay.textContent = `ì ìˆ˜: ${score}`;
		
		// íš¨ê³¼ìŒ ì¬ìƒ
		clickSound.currentTime = 0; // ë¹ ë¥´ê²Œ ì—°ì† í´ë¦­í•  ë•Œë„ íš¨ê³¼ìŒì´ ì¬ìƒë˜ë„ë¡
		clickSound.play();
		
		// ì ìˆ˜ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
		scoreDisplay.style.animation = "scorePop 0.3s ease";
		setTimeout(() => {
			scoreDisplay.style.animation = "";
		}, 300);
		
		// ìµœê³  ì ìˆ˜ ê°±ì‹ 
		if (score > highScore) {
			highScore = score;
			localStorage.setItem("highScore", highScore);
			highScoreDisplay.textContent = `ìµœê³  ì ìˆ˜: ${highScore}`;
			
			// ìµœê³  ì ìˆ˜ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
			highScoreDisplay.style.animation = "scorePop 0.3s ease";
			setTimeout(() => {
				highScoreDisplay.style.animation = "";
			}, 300);
		}
	}
	
	function setDifficulty(level) {
		difficulty = level;
		if (level === 'easy') {
			scoreIncrement = 2;
			timerDecrement = 1;
		} else if (level === 'normal') {
			scoreIncrement = 1;
			timerDecrement = 1;
		} else if (level === 'hard') {
			scoreIncrement = 1;
			timerDecrement = 2;
		}
		alert(`ë‚œì´ë„ê°€ ${level.toUpperCase()}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!`);
	}
	
	function spawnItem() {
		if (!gameRunning) return;

		let item = document.getElementById("specialItem");
		let randomX = Math.random() * 80 + 10; // 10% ~ 90% ìœ„ì¹˜
		let randomY = Math.random() * 80 + 10;

		item.style.left = `${randomX}%`;
		item.style.top = `${randomY}%`;
		item.style.display = "block";

		// 3ì´ˆ í›„ ì‚¬ë¼ì§€ê²Œ ì„¤ì •
		setTimeout(() => {
			item.style.display = "none";
		}, 3000);
	}

	// ì¼ì • í™•ë¥ ë¡œ ì•„ì´í…œì´ ë‚˜íƒ€ë‚˜ë„ë¡ ì„¤ì •
	setInterval(() => {
		if (Math.random() < 1.0) { // 30% í™•ë¥ ë¡œ ì•„ì´í…œ ë“±ì¥
			spawnItem();
		}
	}, 5000);
	
	function collectItem() {
		let item = document.getElementById("specialItem");
		item.style.display = "none";

		itemSound.currentTime = 0;
		itemSound.play();
	
		// ë³´ë„ˆìŠ¤ íš¨ê³¼ ì ìš©
		if (Math.random() < 0.5) { // 50% í™•ë¥ ë¡œ ì ìˆ˜ ë³´ë„ˆìŠ¤
			score += 5;
			alert("ğŸ‰ ì ìˆ˜ +5 ë³´ë„ˆìŠ¤!");
		} else { // 50% í™•ë¥ ë¡œ ì‹œê°„ ë³´ë„ˆìŠ¤
			timeLeft += 3;
			alert("â³ ì‹œê°„ +3ì´ˆ ì¦ê°€!");
		}

		// ì ìˆ˜ ì—…ë°ì´íŠ¸
		scoreDisplay.textContent = `ì ìˆ˜: ${score}`;
		timerDisplay.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
	}
	
	function saveScore(finalScore) {
		let scores = JSON.parse(localStorage.getItem("scores")) || [];
		scores.push(finalScore);
		scores.sort((a, b) => b - a); // ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
		scores = scores.slice(0, 5); // ìƒìœ„ 5ê°œ ì ìˆ˜ë§Œ ì €ì¥
		localStorage.setItem("scores", JSON.stringify(scores));
		
		displayScores();
	}
	
	function displayScores() {
		let scores = JSON.parse(localStorage.getItem("scores")) || [];
		let scoreList = document.getElementById("scoreList");
		scoreList.innerHTML = "<h3>ğŸ† ìµœê·¼ ìµœê³  ì ìˆ˜</h3>";
		
		scores.forEach((score, index) => {
			scoreList.innerHTML += `<p>${index + 1}. ${score} ì </p>`;
		});
	}
	
	function shareScore() {
		let scores = JSON.parse(localStorage.getItem("scores")) || [];
		if (scores.length === 0) {
			alert("ì•„ì§ ì €ì¥ëœ ì ìˆ˜ê°€ ì—†ì–´ìš”! ğŸ˜¢");
			return;
		}

		let topScore = scores[0]; // ìµœê³  ì ìˆ˜ ê°€ì ¸ì˜¤ê¸°
		let shareText = `ë‚´ ìµœê³  ì ìˆ˜ëŠ” ${topScore}ì ì´ì•¼! ë„ˆë„ ë„ì „í•´ë´! ğŸ”¥`;
		let shareUrl = `https://yourgame.com?score=${topScore}`;
		
		navigator.clipboard.writeText(`${shareText} ${shareUrl}`).then(() => {
			alert("ì ìˆ˜ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”! ì¹œêµ¬ì—ê²Œ ê³µìœ í•´ë³´ì„¸ìš”. ğŸ‰");
		});
	}
	
	displayScores();
	</script>
</body>
</html>